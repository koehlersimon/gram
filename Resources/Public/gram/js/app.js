document.addEventListener("DOMContentLoaded",(function(e){window.gram=new Gram;let t=document.getElementById("modal-post"),a=document.getElementById("gallery"),o=0;if(gram.initStyles(),a){gram.loadGalleryItems(1,a,(function(){o++})),document.getElementById("gallery-loadmore").addEventListener("click",(function(e){gram.loadGalleryItems(o+1,a,(function(){o++}))}))}if(t){let e=t.querySelector(".carousel-inner"),a=t.querySelector("ul.comments"),o=t.querySelector(".modal-content");t.querySelector(".modal-body");t.addEventListener("show.bs.modal",(function(r){let d=r.relatedTarget.getAttribute("data-bs-postid"),l="data/post-"+d+".json",n="data/post-"+d+"-comments.json";gram.showLoader("modal-post-loader"),o.style.display="none",gram.resetModal(t),gram.loadData(l,(function(a){gram.hideLoader("modal-post-loader"),o.style.display="block";let r=t.querySelector(".username"),d=t.querySelector(".location"),l=JSON.parse(a),n="";r.innerHTML=l.username,d.innerHTML=l.location,l.media&&(l.media.reverse(),l.media.forEach(((e,t)=>{let a=e.path;var o="";switch(o=0===t?"carousel-item active":"carousel-item",e.type){case"image":n+='<div class="'+o+'"><img src="'+a+'" class="img-fluid w-100"></div>';break;case"video":n+='<div class="'+o+'"><div class="ratio ratio-1x1"><video src="'+a+'" class="" controls="true"></video></div></div>'}}))),e.innerHTML=n})),gram.loadData(n,(function(e){let t=JSON.parse(e);try{gram.buildCommentList(a,t.discussion.comments)}catch(e){gram.notification("Comments could not be loaded!")}}))})),t.addEventListener("hide.bs.modal",(function(e){gram.pauseAllVideos(),gram.hideLoader("modal-post-loader")})),document.querySelector("#post-modal-carousel").addEventListener("slide.bs.carousel",(function(e){gram.pauseAllVideos()}))}var r=document.querySelectorAll(".needs-validation");Array.prototype.slice.call(r).forEach((function(e){e.addEventListener("submit",(function(t){e.checkValidity()||(t.preventDefault(),t.stopPropagation()),e.classList.add("was-validated")}),!1)}));setInterval((function(){gram.updateNotifications()}),5e3)}));