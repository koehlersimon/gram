class Gram{loadData(e,t){let a=new XMLHttpRequest;a.open("GET",e,!0),a.setRequestHeader("Content-Type","application/json"),a.onreadystatechange=function(){if(4===this.readyState&&200===this.status){let e=this.responseText;t(e)}4===this.readyState&&404===this.status&&gram.notification("Error loading JSON data from: "+e)},a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send()}loadGalleryItems(e,t,a){var s=this;this.loadData("data/gallery-page-"+e+".json",(function(e){JSON.parse(e).items.forEach(((e,a)=>{let n=s.galleryItem(e);t.appendChild(n)})),a()}))}showLoader(e){let t=document.getElementById(e),a=document.createElement("div");a.classList.add("spinner-border","text-light","m-auto"),a.innerHTML='<span class="sr-only">Loading...</span>',t.appendChild(a)}hideLoader(e){document.getElementById(e).innerHTML=""}pauseAllVideos(){let e=document.querySelectorAll("video");e&&e.forEach(((e,t)=>{e.pause()}))}buildCommentList(e,t){e.innerHTML="",t.length>0?t.forEach(((t,a)=>{let s=document.createElement("li"),n=document.createElement("strong"),r=document.createElement("p"),o=document.createElement("img");n.innerHTML=t.username,r.innerHTML=t.content,r.prepend(n),s.appendChild(o),s.appendChild(r),o.src=t.avatar,o.width=40,o.height=40,e.appendChild(s)})):e.innerHTML='<li class="alert alert-info m-4">No comments yet. Be the first one to write something!</li>'}resetModal(e){e.querySelector(".username").innerHTML="",e.querySelector(".location").innerHTML="",e.querySelector("textarea").value="",gram.textAreaAdjust(e.querySelector("textarea")),e.querySelector("ul.comments").innerHTML=""}textAreaAdjust(e){e.scrollHeight<300&&(e.style.height="1px",e.style.height=0+e.scrollHeight+"px")}galleryItem(e){let t=document.createElement("div");return t.classList.add("col"),t.innerHTML='<a href="#" data-bs-toggle="modal" data-bs-target="#modal-post" data-bs-postid="'+e.id+'"><div><img src="'+e.thumbnail+'" alt="thumbnail" class="w-100 h-100"></div><div class="overlay"><i class="fa fa-heart"></i> '+e.likecount+' <i class="fa fa-comment"></i> '+e.commentcount+"</div></a>",t}notification(e){var t=document.getElementById("liveToast"),a=new bootstrap.Toast(t);t.querySelector(".toast-body").innerHTML=e,a.show()}initStyles(){let e=document.getElementById("styles");"light"===gram.getCookie("currentstyle")?e.href="css/styles.css":"dark"===gram.getCookie("currentstyle")&&(e.href="css/styles-dark.css")}toggleStyles(){let e=document.getElementById("styles");"light"===gram.getCookie("currentstyle")?(e.href="css/styles-dark.css",gram.setCookie("currentstyle","dark",10)):(gram.getCookie("currentstyle"),e.href="css/styles.css",gram.setCookie("currentstyle","light",10))}setCookie(e,t,a){const s=new Date;s.setTime(s.getTime()+24*a*60*60*1e3);let n="expires="+s.toUTCString();document.cookie=e+"="+t+";"+n+";path=/"}getCookie(e){let t=e+"=",a=document.cookie.split(";");for(let e=0;e<a.length;e++){let s=a[e];for(;" "==s.charAt(0);)s=s.substring(1);if(0==s.indexOf(t))return s.substring(t.length,s.length)}return""}updateNotifications(){const e=document.querySelector(".dropdown-menu-likes");e&&(e.innerHTML="",gram.loadData("data/notifications.json",(function(t){JSON.parse(t).notifications.forEach(((t,a)=>{var s=document.createElement("li");s.innerHTML='<img src="'+t.avatar+'" class="avatar" width="24" height="24" alt="'+t.username+'"><div class="px-2"><a href="profile.html"><strong>'+t.username+"</strong></a> "+t.message+' <span class="text-muted">'+t.time+'</span></div><img src="'+t.avatar+'" class="ms-auto" width="40" height="40" alt="'+t.username+'">',e.appendChild(s)}))})))}}